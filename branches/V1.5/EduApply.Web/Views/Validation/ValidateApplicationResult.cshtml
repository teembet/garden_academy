@using EduApply.Data.Entities
@using EduApply.Logic.Interfaces
@using EduApply.Logic.Service
@model EduApply.Web.Models.FormResultModel

@{
    ViewBag.Title = "Validate Result";
    Layout = "~/Views/Shared/ApplicationLayout.cshtml";
    var appFormservice = EngineContext.Resolve<IApplicationFormRepository>();
    var applicationFormWorkFlow = appFormservice.GetFirstApplicationFormWorkFlow(Convert.ToInt32(Session["AppFormId"]));
    var workFlow = appFormservice.GetWorkFlowItem(applicationFormWorkFlow.WorkFlowId);
}


<div class="container">
    <h4>Application Result - Please enter either your application number or registration number or both to verify your result </h4>
    <hr />
    @Html.ValidationSummary(true, "", new { @class = "text-danger alert alert-danger" })

    @using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()

        <div class="form-horizontal">

            <div class="form-group">
                <label class="control-label col-md-2">Application Number:</label>
                <div class="col-md-4">
                    <input type="text" name="AppNum" value="@Model.AppNum" class="form-control" id="AppNo" />
                </div>
                <label class="control-label col-md-2">Registration Number:</label>
                <div class="col-md-4">
                    <input type="text" name="RegNum" value="@Model.RegNum" class="form-control" id="RegNo" />
                </div>
            </div>
            @if (Model.TotalScore > 0)
            {
                <div class="col-md-12">
                    @*<p>
                            <strong>@Html.DisplayNameFor(model => model.AppNum)</strong>    @Html.DisplayFor(model => model.AppNum)
                        </p>*@
                    <hr />
                    @if (Model.EngScore > 0)
                    {
                        <div class="form-group">
                            <div class="col-md-4">English</div>
                            <div class="col-md-4"><strong>@Html.DisplayFor(model => model.EngScore)</strong>    </div>

                            <div class="row"></div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-4">@Html.DisplayFor(model => model.Subject2)   </div>
                            <div class="col-md-4"><strong>@Html.DisplayFor(model => model.Subject2Score)</strong>    </div>
                            <div class="row"></div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-4">@Html.DisplayFor(model => model.Subject3)  </div>
                            <div class="col-md-4"><strong>@Html.DisplayFor(model => model.Subject3Score)</strong>    </div>
                            <div class="row"></div>
                        </div>

                        <div class="form-group">
                            <div class="col-md-4">@Html.DisplayFor(model => model.Subject4)</div>
                            <div class="col-md-4"><strong>@Html.DisplayFor(model => model.Subject4Score)</strong>    </div>
                            <div class="row"></div>
                        </div>
                        <hr />
                    }

                    <div class="form-group">
                        <div class="col-md-4">
                            <h4>
                                <strong>@Html.DisplayNameFor(model => model.TotalScore)</strong>
                            </h4>
                        </div>
                        <div class="col-md-4">
                            <h4>
                                <strong>
                                    @Html.DisplayFor(model => model.TotalScore)
                                </strong>
                            </h4>
                        </div>
                        <div class="col-md-4"></div>
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <hr />
                        </div>
                    </div>

                </div>
            }
            <hr />
            <div class="form-group">
                <div class="col-md-8">
                    @if (!workFlow.Name.Equals("Validate Application Result"))
                    {
                        @Html.ActionLink("<< Back", "BackApplication", "Application", null, new { @class = "btn btn-default" })
                    }
                    <input type="submit" value="Show Result" class="btn btn-primary" id="ShowResult" />
                    @Html.ActionLink("Continue", "ContinueAppResultValidation", null, new { @class = "btn btn-success" })
                </div>
                <div class="col-md-4">
                    @if ((Session["ApplicationForm"] as ApplicationForm).AllowAppResultPrinting && Model.TotalScore > 0)
                    {
                        @Html.ActionLink("Print Result", "PrintAppResult", null, new { appNum = Model.AppNum }, new { @class = "btn btn-warning pull-right" })
                    }
                </div>
            </div>
        </div>
    }



</div>
<script>
    $(function () {
        $("#ShowResult").click(function () {
            var applicationNumber = $("#AppNo").val();
            var registrationNumber = $("#RegNo").val();
            if (applicationNumber == "" && registrationNumber == "") {
                alert("Enter your registration number or your application number");
                return false;
            }
        });

    });
</script>