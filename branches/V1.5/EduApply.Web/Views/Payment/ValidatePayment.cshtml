@using EduApply.Data.Entities
@using EduApply.Logic.Interfaces
@using EduApply.Logic.Service
@model EduApply.Web.Models.PaymentModel

@{
    ViewBag.Title = "Pay";
    Layout = "~/Views/Shared/ApplicationLayout.cshtml";

    var appFormservice = EngineContext.Resolve<IApplicationFormRepository>();
    var applicationFormWorkFlow = appFormservice.GetFirstApplicationFormWorkFlow(Convert.ToInt32(Session["AppFormId"]));
    var workFlow = appFormservice.GetWorkFlowItem(applicationFormWorkFlow.WorkFlowId);
}
<div class="form-boundary">
    <h2>Pay</h2>

    @using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()

        <div class="form-horizontal">
            @*<h4>Enter Payment below</h4>*@
            <hr />
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            @*<div class="form-group">
                    @Html.LabelFor(model => model.Amount, htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-10">
                        @Html.EditorFor(model => model.Amount, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(model => model.Amount, "", new { @class = "text-danger" })
                    </div>
                </div>
                                <div class="form-group">
                    <div class="col-md-offset-2 col-md-10">
                        @Html.ActionLink("<< Back", "BackApplication", "Application", null, new { @class = "btn btn-default" })
                        <input type="submit" value="Submit" class="btn btn-success" />

                    </div>
                </div>
            *@
            <div class="thumbnail">
                <div class="caption">
                    <p>
                        Looks like you have not made payment for this Application, please do so at any of our designated banks. Click the print invoice button below to get your invoice if you haven't already done so
                        as this will be required for presentation at the point of payment.
                    </p>
                    @*<p>
                            @Html.ActionLink("Print Invoice", "PrintInvoice", "Payment", null, new { @class = "btn btn-warning" })
                        </p>*@
                </div>
            </div>

            <div class="form-group">
                <div class="col-md-12">
                    @if (!workFlow.Name.Equals("Pay"))
                    {
                        @Html.ActionLink("<< Back", "BackApplication", "Application", null, new { @class = "btn btn-default" })
                    }

                    @Html.ActionLink("Click Here to Print Invoice", "PrintInvoice", "Payment", null, new { @class = "btn btn-warning" })

                </div>
            </div>
        </div>
    }
</div>

@if (TempData["InvalidAmount"] != null)
{
    <script type="text/javascript">
        $(function () {

            toastr.options =
            {
                "closeButton": false,
                "debug": false,
                "progressBar": false,
                "positionClass": "toast-top-center",
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            };

            toastr.error("Invalid Amount");
        })
    </script>
}
