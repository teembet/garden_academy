@using EduApply.Data.Entities
@using EduApply.Logic.Interfaces
@using EduApply.Logic.Service
@model EduApply.Web.Models.SessionResultModel

@{
    ViewBag.Title = "Validate Result";
    Layout = "~/Views/Shared/ApplicationLayout.cshtml";
    var appFormservice = EngineContext.Resolve<IApplicationFormRepository>();
    var applicationFormWorkFlow = appFormservice.GetFirstApplicationFormWorkFlow(Convert.ToInt32(Session["AppFormId"]));
    var workFlow = appFormservice.GetWorkFlowItem(applicationFormWorkFlow.WorkFlowId);
}

<div class="container">
    <h4>Result Validation - Please enter your registration number below.</h4>
    <hr />

    @using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()

        <div class="form-horizontal">

            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            <div class="form-group">
                @Html.LabelFor(model => model.RegNum, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.RegNum, new { htmlAttributes = new { @class = "form-control default-width" } })
                    @Html.ValidationMessageFor(model => model.RegNum, "", new { @class = "text-danger" })
                </div>
            </div>


            @if (Model.TotalScore > 0)
            {

                <div class="col-md-12">
                    @*<p>
                            <strong>@Html.DisplayNameFor(model => model.AppNum)</strong>    @Html.DisplayFor(model => model.AppNum)
                        </p>*@
                    <hr />
                    @if (Model.EngScore > 0)
                    {
                        <div class="form-group">
                            <div class="col-md-4">English</div>
                            <div class="col-md-4"><strong>@Html.DisplayFor(model => model.EngScore)</strong>    </div>

                            <div class="row"></div>
                        </div>

                        <div class="form-group">
                            <div class="col-md-4">@Html.DisplayFor(model => model.Subject2)   </div>
                            <div class="col-md-4"><strong>@Html.DisplayFor(model => model.Subject2Score)</strong>    </div>
                            <div class="row"></div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-4">@Html.DisplayFor(model => model.Subject3)  </div>
                            <div class="col-md-4"><strong>@Html.DisplayFor(model => model.Subject3Score)</strong>    </div>
                            <div class="row"></div>
                        </div>

                        <div class="form-group">
                            <div class="col-md-4">@Html.DisplayFor(model => model.Subject4)</div>
                            <div class="col-md-4"><strong>@Html.DisplayFor(model => model.Subject4Score)</strong>    </div>
                            <div class="row"></div>
                        </div>
                        <hr />
                    }
                    <div class="form-group">
                        <div class="col-md-4">
                            <h4>
                                <strong>@Html.DisplayNameFor(model => model.TotalScore)</strong>
                            </h4>
                        </div>
                        <div class="col-md-4">
                            <h4>
                                <strong>
                                    @Html.DisplayFor(model => model.TotalScore)
                                </strong>
                            </h4>
                        </div>
                        <div class="col-md-4"></div>
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <hr />
                        </div>
                    </div>

                </div>
            }
            <hr />
            <div class="form-group">
                <div class="col-md-8">
                    @if (!workFlow.Name.Equals("Validate Non-Application Result"))
                    {
                        @Html.ActionLink("<< Back", "BackApplication", "Application", null, new { @class = "btn btn-default" })
                    }
                    <input type="submit" value="Show Result" class="btn btn-primary" />
                    @Html.ActionLink("Continue", "ContinueNonAppResultValidation", null, new { @class = "btn btn-success" })
                </div>
                <div class="col-md-4">
                    @if ((Session["ApplicationForm"] as ApplicationForm).AllowNonAppResultPrinting && Model.TotalScore > 0)
                    {
                        @Html.ActionLink("Print Result", "PrintNonAppResult", null, new { regNum = Model.RegNum }, new { @class = "btn btn-warning pull-right" })
                    }
                </div>
            </div>

        </div>
    }


</div>
